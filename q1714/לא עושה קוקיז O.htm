<!DOCTYPE html>
<html lang="he" itemscope="" itemtype="http://schema.org/Blog" ng-app="phpg">
<head>
<base href="http://phpguide.co.il/">
<meta charset="utf-8">
<meta name="description" content="שאלה לא עושה קוקיז :O">
<meta name="keywords" content="שאלה, עזרה">
<meta name="author" content="ArielTador">
<link rel="shortcut icon" href="..\static\images\favicon.ico">
<!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="stylesheet" type="text/css" href="..\static\styles\A.allstyles.compiled.css.pagespeed.cf.P4R8BwzxFu.css">
<title>לא עושה קוקיז :O | שאלת לימוד PHP</title>
<meta itemprop="name" content="לא עושה קוקיז :O | שאלת לימוד PHP">
<meta itemprop="description" content="שאלה לא עושה קוקיז :O">
</head>
<body dir='rtl' class="forum-qna">
<div class='page-container'>
<section id='header'>
<div class="topRowHolder">
<a class="logo" href="..\index.htm"><img src="..\static\images\xlogo.jpg.pagespeed.ic.6YgiLES4FJ.jpg"></a>
<nav class="main">
<ul>
<li><a href="..\index.htm">פוסטים</a></li>
<li><a href="..\qna.htm" class="active">פורום</a></li>
</ul>
<div class="clear"></div>
</nav> <div class="clear"></div>
</div>
</section>  
<div class="layout-holder">
<section id="content">
<div class="qna_view_question" id="qnaQuestionHolder">
<div class="qna-home-row">
<div class="counts">
 
<div class="status  answered">
<div class="item-count">4</div>
<div>
תגובות
</div>
</div>
</div>
<div class="question-summary-wrapper">
<h2><a href="לא עושה קוקיז O.htm" title="if&amp;#40;isset&amp;#40;$_POST&amp;#91;&apos;submit&apos;&amp;#93;&amp;#41;&amp;#41;
&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;#123;
&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ">לא עושה קוקיז :O</a></h2>
<div class="userinfo">
פתח
<a>ArielTador</a>
,
<time class="timeago relativetime" datetime="2013-12-20T08:16:00+02:00" style="display:inline-block;">
20 לדצמבר 2013 </time>
</div>
</div>
</div> <div class="clear"></div>
<div style="border-top:1px dashed #D1D1D1; margin-top:10px; padding-top:10px; " class="qnapost" id='questionText1714'>
<div class="php codeblock"><span class="kw1">if</span><span class="br0">&#40;</span><span class="kw3">isset</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'submit'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$nick</span> <span class="sy0">=</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'nick'</span><span class="br0">&#93;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$password</span> <span class="sy0">=</span> <span class="kw3">md5</span><span class="br0">&#40;</span><span class="kw3">sha1</span><span class="br0">&#40;</span><span class="kw3">md5</span><span class="br0">&#40;</span><span class="kw3">sha1</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'password'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$sql</span> <span class="sy0">=</span> <span class="kw3">mysql_query</span><span class="br0">&#40;</span><span class="st0">&quot;SELECT * FROM `admins` WHERE `nick`='<span class="es4">$nick</span>' AND `password`='<span class="es4">$password</span>'&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw3">mysql_num_rows</span><span class="br0">&#40;</span><span class="re0">$sql</span><span class="br0">&#41;</span> <span class="sy0">&lt;=</span> <span class="nu0">0</span><span class="br0">&#41;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">echo</span> <span class="st_h">'&lt;script&gt;alert(&quot;שם משתמש או סיסמה אינם נכונים!&quot;);top.location=&quot;&quot;;&lt;/script&gt;'</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">echo</span> <span class="st_h">'&lt;script&gt;alert(&quot;התחברת בהצלחה!&quot;);top.location=&quot;&quot;;&lt;/script&gt;'</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">setcookie</span><span class="br0">&#40;</span><span class="st_h">'pn'</span><span class="sy0">,</span> <span class="re0">$nick</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">setcookie</span><span class="br0">&#40;</span><span class="st_h">'pp'</span><span class="sy0">,</span> <span class="kw3">md5</span><span class="br0">&#40;</span><span class="kw3">sha1</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'password'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span></div><br><br>הקוד הזה בעצם מבצע התחברות לאתר, אבל.. כשאני עושה את הקוד הזה בשרת wamp, הוא מתחבר ושומר קוקיז, אך כשאני עושה את זה באחסון רגיל, הוא מציג שהפרטים נכונים, ואת ההודעה &quot;התחברת בהצלחה&quot;, אך הוא לא שומר קוקיז, אני מנסה שעתיים לסדר את זה, ואני לא מצליח. למה זה לא שומר קוקיז בשרת רגיל? </div>
</div>
<h3>
<span id="answersCounter">4 </span>
תשובות
</h3>
<section class="answers" id="qnaAnswers">
<div class="answer" id="answer7806">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/72a97fdf49d219cf38f0f5c4483e15f0?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>ldbrgr</a>
ב
<span style="font-size:10px"> 20 לדצמבר 2013 </span>
<a id="answer_7806" href="לא עושה קוקיז O.htm#answer_7806">#</a>
</span>
<div class="clear"></div>
</div>
<p>
קודם כל, כדי לפתור את הבעיה:<br><a href="..\Can not send session cookie  headers already sent.htm">http://phpguide.co.il/Can+not+send+session+cookie++headers+already+sent.htm</a><br>אתה לא רואה את השגיאה כי הדיבוג מכובה באחסון ובהגדרות של הWAMP הoutput_buffering פועל; תכבה אותו דרך php.ini ותפעיל דיבוג באחסון..<br>חוץ מזה,<br>הקוד חשוף ל <a href="..\SQL_Injection.htm">SQLi</a>,<br><a href="..\שיפור_ביצועי_מסד_עם_MySQLI.htm">עדיף לא לעבוד עם MySQL lib</a><br><a href="..\sha1 pass and salt are not secure.htm">וההצפנה(?) של הסיסמא - אוי גוועלד! </a><br>בהצלחה D: </p>
</div>
<div class="answer" id="answer7808">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/72a97fdf49d219cf38f0f5c4483e15f0?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>ldbrgr</a>
ב
<span style="font-size:10px"> 20 לדצמבר 2013 </span>
<a id="answer_7808" href="לא עושה קוקיז O.htm#answer_7808">#</a>
</span>
<div class="clear"></div>
</div>
<p>
.. </p>
</div>
<div class="answer" id="answer7811">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/a7bf9407cf22f5ced54bf1c2ac3219a7?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>ArielTador</a>
ב
<span style="font-size:10px"> 21 לדצמבר 2013 </span>
<a id="answer_7811" href="לא עושה קוקיז O.htm#answer_7811">#</a>
</span>
<div class="clear"></div>
</div>
<p>
בקשר ל SQLi זה בסדר, כי רק אני משתמש בזה, אז אין צורך לאבטח :D<br>אגב, יש באתר עוד קוקיז, והם עובדים מצויין, אז למה פה זה לא עובד? </p>
</div>
<div class="answer" id="answer7812">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/72a97fdf49d219cf38f0f5c4483e15f0?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>ldbrgr</a>
ב
<span style="font-size:10px"> 21 לדצמבר 2013 </span>
<a id="answer_7812" href="לא עושה קוקיז O.htm#answer_7812">#</a>
</span>
<div class="clear"></div>
</div>
<p>
כי בקוד הזה ספציפית אתה שולח פלט ללקוח לפני שאתה שולח כתרים (headers), אני לא יודע מה לגבי שאר האתר..<br>תעביר את הecho מתחת ל setcookie או שתפעיל output_buffering וזה יפתור את הבעיה. </p>
</div>
</section>
</section>  
<section id="sidebar">
<section id="search_box">
<form method="get" action="http://www.google.co.il/search" id="search_form">
<input type="hidden" name="hl" value="iw">
<input type="checkbox" name="sitesearch" style="display:none" value="http://phpguide.co.il" checked="">
<input type="text" class="search_form" placeholder="חיפוש" name="q" id="search_field">
<input type="submit" value="" title="לחפש">
</form>
</section>
<style>.staticSidebarPageLinks a{color:#e85a2d;font-weight:bold;text-decoration:underline}</style>
<div class='rblock staticSidebarPageLinks' style="padding:0 -50px; width:100%; background: white;">
<a href="page_mvcebook.html" title="למד איך עובד MVC" onclick="Analytics.track('Promotion', 'click', 'GoToLanding', 'mvcebook-sidebar-banner1');">
ספר חינם על MVC
</a>
שאתה הולך להוריד כי אם אתה רוצה ללמוד על ארגון קוד יעיל ומודרני באתרים כמו זה או פייסבוק או כי כולם אוהבים להוריד דברים איכותיים בחינם מהאינטרנט
<br><br>
<a href='page_oopbook.html'>
ספר הלימוד - תכנות מונחה עצמים מאפס
</a>
שסוף סוף ילמד אותך פיתוח מונחה עצמים נכון בצורה פשוטה, יענה על כל השאלות ויכין אותך לרעיונות עבודה.
<br><br>
<a href='page_phpunit.html'>
קורס בדיקות יחידה phpunit
</a>
שיעזור לך להקטין בחצי את כמות הבאגים, את כאב הראש והזמן המבוזבז על פתירתם
<br><br>
<a href='page_mysqlinteractive.html'>
קורס mysql אינטרקטיבי
</a>
שיייקח אותך צעד אחר צעד למומחה שאילתות mysql לייב
<br><br><br>
<small>האתר ב-readonly
<br>
תודה לכל מי שתרם, ענה, שאל, כתב, לימד ועזר במשך השנים <br>
orelbey, splash, raslin, cayce, iiddaannyy, michael, kingyes, ilikeme, itamarhadad, iosolidar, jbstyle<br>
- alex@הדומיין הזה
</small>
</div>
</section>
</div>
<footer id='footer'>
</footer>
</div>  
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular-resource.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular-cookies.min.js"></script>
<script type="text/javascript" src="..\assets\c2224fc8\jquery.min.js.pagespeed.jm.0IhQ85x_cu.js"></script>
<script src="..\static\scripts\scripts.compiled.js plugins.js ui.js analytics.js.pagespeed.jc.HoDAx8MSoV.js"></script><script>eval(mod_pagespeed_suqc1br1Uj);</script>
<script>eval(mod_pagespeed_tNeKvp6lmR);</script>
<script>eval(mod_pagespeed_PxPJYmoXjB);</script>
<script>eval(mod_pagespeed_2G0hMgPcln);</script>
</body>
</html>
