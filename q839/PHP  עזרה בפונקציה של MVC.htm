<!DOCTYPE html>
<html lang="he" itemscope="" itemtype="http://schema.org/Blog" ng-app="phpg">
<head>
<base href="http://phpguide.co.il/">
<meta charset="utf-8">
<meta name="description" content="שאלה PHP | עזרה בפונקציה של MVC">
<meta name="keywords" content="שאלה, עזרה">
<meta name="author" content="shlomo120">
<link rel="shortcut icon" href="..\static\images\favicon.ico">
<!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="stylesheet" type="text/css" href="..\static\styles\A.allstyles.compiled.css.pagespeed.cf.P4R8BwzxFu.css">
<title>PHP | עזרה בפונקציה של MVC | שאלת לימוד PHP</title>
<meta itemprop="name" content="PHP | עזרה בפונקציה של MVC | שאלת לימוד PHP">
<meta itemprop="description" content="שאלה PHP | עזרה בפונקציה של MVC">
</head>
<body dir='rtl' class="forum-qna">
<div class='page-container'>
<section id='header'>
<div class="topRowHolder">
<a class="logo" href="..\index.htm"><img src="..\static\images\xlogo.jpg.pagespeed.ic.6YgiLES4FJ.jpg"></a>
<nav class="main">
<ul>
<li><a href="..\index.htm">פוסטים</a></li>
<li><a href="..\qna.htm" class="active">פורום</a></li>
</ul>
<div class="clear"></div>
</nav> <div class="clear"></div>
</div>
</section>  
<div class="layout-holder">
<section id="content">
<div class="qna_view_question" id="qnaQuestionHolder">
<div class="qna-home-row">
<div class="counts">
 
<div class="status  answered">
<div class="item-count">6</div>
<div>
תגובות
</div>
</div>
</div>
<div class="question-summary-wrapper">
<h2><a href="PHP  עזרה בפונקציה של MVC.htm" title="אהלן .בניתי איזה פונקציה קטנה של קבצי עיצוב שעובדת על MVC (כלומר בקובץ אין משתנים אלא דברים כאלו {{var4}} )אבל יש בפונקציה הזו חיסרון אחד . היא לא יכולה לקרוא משתנים מבחוץ כמו של MYSQLI או משהו כזה . אלא רק מה שאני מגדיר כפרמטר בפונקציה .הינה הקוד : static function including&amp;#40;$file,$var =">PHP | עזרה בפונקציה של MVC</a></h2>
<div class="userinfo">
פתח
<a>shlomo120</a>
,
<time class="timeago relativetime" datetime="2012-08-02T15:22:19+03:00" style="display:inline-block;">
02 לאוגוסט 2012 </time>
</div>
</div>
</div> <div class="clear"></div>
<div style="border-top:1px dashed #D1D1D1; margin-top:10px; padding-top:10px; " class="qnapost" id='questionText839'>
אהלן .<br>בניתי איזה פונקציה קטנה של קבצי עיצוב שעובדת על MVC (כלומר בקובץ אין משתנים אלא דברים כאלו {{var4}} )<br>אבל יש בפונקציה הזו חיסרון אחד . היא לא יכולה לקרוא משתנים מבחוץ כמו של MYSQLI או משהו כזה . אלא רק מה שאני מגדיר כפרמטר בפונקציה .<br>הינה הקוד : <br><div class="php codeblock">static <span class="kw2">function</span> including<span class="br0">&#40;</span><span class="re0">$file</span><span class="sy0">,</span><span class="re0">$var</span> <span class="sy0">=</span><span class="st0">&quot;&quot;</span> <span class="sy0">,</span> <span class="re0">$var1</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span> <span class="re0">$var2</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span> <span class="sy0">,</span> <span class="re0">$var3</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span> <span class="sy0">,</span> <span class="re0">$var4</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span> <span class="re0">$var5</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span> <span class="re0">$var6</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span> <span class="re0">$var7</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span> <span class="re0">$var8</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span> <span class="re0">$var9</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span> <span class="re0">$var10</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span><br>
&nbsp; &nbsp; <span class="br0">&#123;</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$file_path</span> <span class="sy0">=</span> <span class="st_h">'system/template/'</span><span class="sy0">.</span><span class="re0">$file</span><span class="sy0">.</span><span class="st_h">'.tpl'</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw3">file_exists</span><span class="br0">&#40;</span><span class="re0">$file_path</span><span class="br0">&#41;</span><span class="br0">&#41;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$file</span> <span class="sy0">=</span> &nbsp;<span class="kw3">file_get_contents</span><span class="br0">&#40;</span><span class="re0">$file_path</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">preg_match_all</span><span class="br0">&#40;</span><span class="st_h">'@{{([^{{}}]*)}}@'</span><span class="sy0">,</span> <span class="re0">$file</span><span class="sy0">,</span> <span class="re0">$matches</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$matches</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy0">&gt;</span> <span class="nu0">0</span> <span class="br0">&#41;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$trimedValue</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$matches</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="kw1">as</span> <span class="re0">$arg</span> <span class="br0">&#41;</span> <br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$trimedValue</span> <span class="sy0">=</span> <span class="kw3">trim</span><span class="br0">&#40;</span><span class="re0">$arg</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$file</span> <span class="sy0">=</span> <span class="kw3">preg_replace</span><span class="br0">&#40;</span><span class="st_h">'@\{\{'</span> <span class="sy0">.</span> <span class="re0">$arg</span> <span class="sy0">.</span> <span class="st_h">'\}\}@'</span><span class="sy0">,</span> <span class="re0">$$trimedValue</span><span class="sy0">,</span> <span class="re0">$file</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$file</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="kw1">else</span> <span class="kw1">return</span> <span class="re0">$file</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="kw1">else</span> <span class="kw1">return</span> <span class="st0">&quot;The File '<span class="es4">$file</span>' Doesnt Exists... (FilePath : '<span class="es4">$file_path</span>')&quot;</span><span class="sy0">;</span><br>
<br>
<br>
&nbsp; &nbsp; <span class="br0">&#125;</span></div><br>אם מישהו יודע אולי דרכים כדי שהפונקציה הזו תהיה יותר גמישה ונוחה שיכתוב כאן ..<br>(הפונקציה הזו היא חלק ממחלקה של העיצוב .לפני ששמתי אותה במחלקה כלומר לכל חלק עיצוב באתר כתבתי את כל הקוד הזה , היא שלחה לדף כל משתנה שנוצר בעמוד . אני רוצה לעשות אותו הדבר - שישלח את כל המשתנים בעמוד לMVC . מקווה שאני ברור ... )<br>תודה </div>
</div>
<h3>
<span id="answersCounter">6 </span>
תשובות
</h3>
<section class="answers" id="qnaAnswers">
<div class="answer" id="answer3569">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/de357e71ee8c0f7547a9d3f1fb57e5c4?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>shlomo120</a>
ב
<span style="font-size:10px"> 02 לאוגוסט 2012 </span>
<a id="answer_3569" href="PHP  עזרה בפונקציה של MVC.htm#answer_3569">#</a>
</span>
<div class="clear"></div>
</div>
<p>
לא משנה הסתדרתי ... <br>הינה הקוד שאני עובד איתו עכשיו : <br><br><div class="php codeblock">static <span class="kw2">function</span> template<span class="br0">&#40;</span> <span class="re0">$model</span><span class="sy0">,</span> <span class="re0">$params</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><br>
&nbsp; <span class="br0">&#123;</span> <br>
&nbsp; &nbsp; <span class="re0">$model</span> <span class="sy0">=</span> <span class="st_h">'system/template/'</span><span class="sy0">.</span><span class="re0">$model</span><span class="sy0">.</span><span class="st_h">'.tpl'</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><span class="kw3">file_exists</span><span class="br0">&#40;</span><span class="re0">$model</span><span class="br0">&#41;</span> <span class="sy0">||</span> <span class="sy0">!</span><span class="kw3">is_readable</span><span class="br0">&#40;</span><span class="re0">$model</span><span class="br0">&#41;</span><span class="br0">&#41;</span><br>
&nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span><br>
&nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="st0">&quot;Error: failed to load the template <span class="es4">$model</span>&quot;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br>
&nbsp; &nbsp; <span class="re0">$model</span> <span class="sy0">=</span> <span class="kw3">file_get_contents</span><span class="br0">&#40;</span><span class="re0">$model</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; <span class="re0">$keys</span> <span class="sy0">=</span> <span class="kw3">array_keys</span><span class="br0">&#40;</span><span class="re0">$params</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; <span class="kw1">for</span><span class="br0">&#40;</span> <span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="re0">$keys</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">&#41;</span><br>
&nbsp; &nbsp; &nbsp; <span class="re0">$keys</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'[{{'</span><span class="sy0">.</span><span class="re0">$keys</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="st_h">'}}]'</span><span class="sy0">;</span><br>
&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw3">preg_replace</span><span class="br0">&#40;</span> <span class="re0">$keys</span><span class="sy0">,</span> <span class="re0">$params</span><span class="sy0">,</span> <span class="re0">$model</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp; &nbsp; <br>
&nbsp; <span class="br0">&#125;</span></div><br><br>ושימוש הוא כזה : <div class="php codeblock"><span class="re0">$data</span> <span class="sy0">=</span> <span class="kw3">Array</span><span class="br0">&#40;</span> <span class="st_h">'time'</span> <span class="sy0">=&gt;</span> &nbsp;<span class="kw3">date</span><span class="br0">&#40;</span><span class="st0">&quot;d/m/y H:i:s&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span><br>
&nbsp;<span class="kw1">echo</span> style<span class="sy0">::</span><span class="me2">template</span><span class="br0">&#40;</span><span class="st0">&quot;test&quot;</span><span class="sy0">,</span><span class="re0">$data</span><span class="br0">&#41;</span><span class="sy0">;</span></div> </p>
</div>
<div class="answer" id="answer3570">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/39c2b97f386140623714a388ca353e79?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>raslin</a>
ב
<span style="font-size:10px"> 02 לאוגוסט 2012 </span>
<a id="answer_3570" href="PHP  עזרה בפונקציה של MVC.htm#answer_3570">#</a>
</span>
<div class="clear"></div>
</div>
<p>
אתה צריך להתאמן על שמות טובים יותר (אינפורמטיבים יותר) לפונקציות,<br>דבר שני, תוותר על העניין הזה של מידע מתוך מערך בעיצוב, זה לא קשור ל MVC,<br>זה סתם טכניקה,<br>יש מערכות צד3 כמו smarty ו savant לזה,<br>אני ממליץ קובץ PHP רגיל, עם משתנים שמועברים מהקונטרולר וזהו,<br>שיהיה בהצלחה </p>
</div>
<div class="answer" id="answer3571">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/de357e71ee8c0f7547a9d3f1fb57e5c4?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>shlomo120</a>
ב
<span style="font-size:10px"> 02 לאוגוסט 2012 </span>
<a id="answer_3571" href="PHP  עזרה בפונקציה של MVC.htm#answer_3571">#</a>
</span>
<div class="clear"></div>
</div>
<p>
אני לא רוצה לעבוד עם מערכות צד 3 ... <br>אני אוהב לכתוב לבד . ככה אני יכול להתאים את זה במדיוק לצרכים של האתר שלי . <br>אני לא עובד עם קונטרולר . זה אתר מבוסס תכנות מונחה עצמים אבל ללא framework ... </p>
</div>
<div class="answer" id="answer3576">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/fbd8d166d60e03c5854fe7114279a94f?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>cthulhu</a>
ב
<span style="font-size:10px"> 03 לאוגוסט 2012 </span>
<a id="answer_3576" href="PHP  עזרה בפונקציה של MVC.htm#answer_3576">#</a>
</span>
<div class="clear"></div>
</div>
<p>
מה הקשר בין הקוד שכתבת לבין mvc? </p>
</div>
<div class="answer" id="answer3577">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/39c2b97f386140623714a388ca353e79?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>raslin</a>
ב
<span style="font-size:10px"> 03 לאוגוסט 2012 </span>
<a id="answer_3577" href="PHP  עזרה בפונקציה של MVC.htm#answer_3577">#</a>
</span>
<div class="clear"></div>
</div>
<p>
אם אתה לא עובד עם קונטרולר, אז זה לא MVC,<br>ואם לא MVC, אז מה זה הדבר הזה שניסית לעשות עכשיו? </p>
</div>
<div class="answer" id="answer3579">
<div>
<span class="userinfo">
<img class="avatar" src="http://www.gravatar.com/avatar/de357e71ee8c0f7547a9d3f1fb57e5c4?s=20&amp;r=g&amp;d=monsterid" alt="avatar"> ענה
<a>shlomo120</a>
ב
<span style="font-size:10px"> 03 לאוגוסט 2012 </span>
<a id="answer_3579" href="PHP  עזרה בפונקציה של MVC.htm#answer_3579">#</a>
</span>
<div class="clear"></div>
</div>
<p>
זה לייבא את הסיידבר ואת חלקי העיצוב תוך שמירה על דינמיות. <br>לדוגמא כמו כאן באתר אני יכול לייבא את הסיידבר ולשלוח לבלוק של המשתמש את השם שלו והאיידי .ואם בא לי לשנות משהו בעיצוב אני משנה בקובץ אחד ולא עובר על כל הקבצים . </p>
</div>
</section>
</section>  
<section id="sidebar">
<section id="search_box">
<form method="get" action="http://www.google.co.il/search" id="search_form">
<input type="hidden" name="hl" value="iw">
<input type="checkbox" name="sitesearch" style="display:none" value="http://phpguide.co.il" checked="">
<input type="text" class="search_form" placeholder="חיפוש" name="q" id="search_field">
<input type="submit" value="" title="לחפש">
</form>
</section>
<style>.staticSidebarPageLinks a{color:#e85a2d;font-weight:bold;text-decoration:underline}</style>
<div class='rblock staticSidebarPageLinks' style="padding:0 -50px; width:100%; background: white;">
<a href="page_mvcebook.html" title="למד איך עובד MVC" onclick="Analytics.track('Promotion', 'click', 'GoToLanding', 'mvcebook-sidebar-banner1');">
ספר חינם על MVC
</a>
שאתה הולך להוריד כי אם אתה רוצה ללמוד על ארגון קוד יעיל ומודרני באתרים כמו זה או פייסבוק או כי כולם אוהבים להוריד דברים איכותיים בחינם מהאינטרנט
<br><br>
<a href='page_oopbook.html'>
ספר הלימוד - תכנות מונחה עצמים מאפס
</a>
שסוף סוף ילמד אותך פיתוח מונחה עצמים נכון בצורה פשוטה, יענה על כל השאלות ויכין אותך לרעיונות עבודה.
<br><br>
<a href='page_phpunit.html'>
קורס בדיקות יחידה phpunit
</a>
שיעזור לך להקטין בחצי את כמות הבאגים, את כאב הראש והזמן המבוזבז על פתירתם
<br><br>
<a href='page_mysqlinteractive.html'>
קורס mysql אינטרקטיבי
</a>
שיייקח אותך צעד אחר צעד למומחה שאילתות mysql לייב
<br><br><br>
<small>האתר ב-readonly
<br>
תודה לכל מי שתרם, ענה, שאל, כתב, לימד ועזר במשך השנים <br>
orelbey, splash, raslin, cayce, iiddaannyy, michael, kingyes, ilikeme, itamarhadad, iosolidar, jbstyle<br>
- alex@הדומיין הזה
</small>
</div>
</section>
</div>
<footer id='footer'>
</footer>
</div>  
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular-resource.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular-cookies.min.js"></script>
<script type="text/javascript" src="..\assets\c2224fc8\jquery.min.js.pagespeed.jm.0IhQ85x_cu.js"></script>
<script src="..\static\scripts\scripts.compiled.js plugins.js ui.js analytics.js.pagespeed.jc.HoDAx8MSoV.js"></script><script>eval(mod_pagespeed_suqc1br1Uj);</script>
<script>eval(mod_pagespeed_tNeKvp6lmR);</script>
<script>eval(mod_pagespeed_PxPJYmoXjB);</script>
<script>eval(mod_pagespeed_2G0hMgPcln);</script>
</body>
</html>
